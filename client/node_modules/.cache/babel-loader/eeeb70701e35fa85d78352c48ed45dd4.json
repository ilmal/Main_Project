{"ast":null,"code":"import _regeneratorRuntime from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useSelector}from\"react-redux\";import axios from\"axios\";import{store}from\"../../index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangeUserOptinos=function ChangeUserOptinos(){var state=useSelector(function(state){return state;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),change=_useState2[0],setChange=_useState2[1];var toggle=function toggle(){setChange(function(prev){return!prev;});};var save=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var cookieValueUserID;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(e.target.newName.value);console.log(e.target.newEmail.value);cookieValueUserID=null;if(!(document.cookie&&document.cookie.search(\"userID\")>-1)){_context.next=11;break;}if(e.target.newName.value===\"\"&&e.target.newEmail.value===\"\"){window.location.reload();}cookieValueUserID=document.cookie.split('; ').find(function(row){return row.startsWith('userID=');}).split('=')[1];_context.next=9;return axios.post(\"/user/changeuser\",{withCredentials:true,name:e.target.newName.value,email:e.target.newEmail.value,userID:cookieValueUserID}).then(function(response){if(response.body===\"Changes successfully changed!\"){store.dispatch({type:\"MESSAGE\",payload:response.body});}else{store.dispatch({type:\"ERR_MESSAGE\",payload:response.body});}});case 9:_context.next=12;break;case 11:store.dispatch({type:\"ERR_MESSAGE\",payload:\"login first!\"});case 12:case\"end\":return _context.stop();}}},_callee);}));return function save(_x){return _ref.apply(this,arguments);};}();var defaulOptions=function defaulOptions(){return/*#__PURE__*/_jsxs(\"div\",{className:\"userHomeSegment changeNameEmail userHomeChangeDefaults\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Username: \"}),state.user.name]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Email: \"}),state.user.email]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:toggle,children:\"Change\"})})]});};var changeOptions=function changeOptions(){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:save,className:\"userHomeSegment changeNameEmail userHomeChangeDefaults\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"newName\",type:\"text\",placeholder:state.user.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"newEmail\",type:\"text\",placeholder:state.user.email})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:toggle,children:\"Save\"})})]});};switch(change){case true:return changeOptions();default:return defaulOptions();}};export default ChangeUserOptinos;","map":{"version":3,"sources":["/home/main-pc/programing/react/client/src/components/userHome/changeUserOptinos.jsx"],"names":["React","useState","useSelector","axios","store","ChangeUserOptinos","state","change","setChange","toggle","prev","save","e","preventDefault","console","log","target","newName","value","newEmail","cookieValueUserID","document","cookie","search","window","location","reload","split","find","row","startsWith","post","withCredentials","name","email","userID","then","response","body","dispatch","type","payload","defaulOptions","user","changeOptions"],"mappings":"idAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,aAAtB,C,wFAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC5B,GAAMC,CAAAA,KAAK,CAAGJ,WAAW,CAAC,SAAAI,KAAK,QAAIA,CAAAA,KAAJ,EAAN,CAAzB,CACA,cAA4BL,QAAQ,CAAC,KAAD,CAApC,wCAAOM,MAAP,eAAeC,SAAf,eAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjBD,SAAS,CAAC,SAAAE,IAAI,QAAI,CAACA,IAAL,EAAL,CAAT,CACH,CAFD,CAIA,GAAMC,CAAAA,IAAI,0FAAG,iBAAOC,CAAP,wIACTA,CAAC,CAACC,cAAF,GACAC,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACI,MAAF,CAASC,OAAT,CAAiBC,KAA7B,EACAJ,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACI,MAAF,CAASG,QAAT,CAAkBD,KAA9B,EAEIE,iBALK,CAKe,IALf,MAOLC,QAAQ,CAACC,MAAT,EAAmBD,QAAQ,CAACC,MAAT,CAAgBC,MAAhB,CAAuB,QAAvB,EAAmC,CAAC,CAPlD,2BAQL,GAAIX,CAAC,CAACI,MAAF,CAASC,OAAT,CAAiBC,KAAjB,GAA2B,EAA3B,EAAiCN,CAAC,CAACI,MAAF,CAASG,QAAT,CAAkBD,KAAlB,GAA4B,EAAjE,CAAqE,CACjEM,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACH,CACDN,iBAAiB,CAAGC,QAAQ,CAACC,MAAT,CACfK,KADe,CACT,IADS,EAEfC,IAFe,CAEV,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,UAAJ,CAAe,SAAf,CAAJ,EAFO,EAGfH,KAHe,CAGT,GAHS,EAGJ,CAHI,CAApB,CAXK,sBAgBCxB,CAAAA,KAAK,CAAC4B,IAAN,CAAW,kBAAX,CAA+B,CACjCC,eAAe,CAAE,IADgB,CAEjCC,IAAI,CAAErB,CAAC,CAACI,MAAF,CAASC,OAAT,CAAiBC,KAFU,CAGjCgB,KAAK,CAAEtB,CAAC,CAACI,MAAF,CAASG,QAAT,CAAkBD,KAHQ,CAIjCiB,MAAM,CAAEf,iBAJyB,CAA/B,EAKHgB,IALG,CAKE,SAAAC,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACC,IAAT,GAAkB,+BAAtB,CAAuD,CACnDlC,KAAK,CAACmC,QAAN,CAAe,CACXC,IAAI,CAAE,SADK,CAEXC,OAAO,CAAEJ,QAAQ,CAACC,IAFP,CAAf,EAIH,CALD,IAKO,CACHlC,KAAK,CAACmC,QAAN,CAAe,CACXC,IAAI,CAAE,aADK,CAEXC,OAAO,CAAEJ,QAAQ,CAACC,IAFP,CAAf,EAIH,CACJ,CAjBK,CAhBD,uCAmCLlC,KAAK,CAACmC,QAAN,CAAe,CACXC,IAAI,CAAE,aADK,CAEXC,OAAO,CAAE,cAFE,CAAf,EAnCK,uDAAH,kBAAJ9B,CAAAA,IAAI,4CAAV,CA2CA,GAAM+B,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxB,mBACI,aAAK,SAAS,CAAC,wDAAf,wBACI,kCACI,qCAAM,iCAAN,CAAwBpC,KAAK,CAACqC,IAAN,CAAWV,IAAnC,GADJ,EADJ,cAII,kCACI,qCAAM,8BAAN,CAAqB3B,KAAK,CAACqC,IAAN,CAAWT,KAAhC,GADJ,EAJJ,cAOI,kCACI,eAAQ,OAAO,CAAEzB,MAAjB,oBADJ,EAPJ,GADJ,CAaH,CAdD,CAgBA,GAAMmC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxB,mBACI,cAAM,QAAQ,CAAEjC,IAAhB,CAAsB,SAAS,CAAC,wDAAhC,wBACI,oCACI,gCADJ,cAEI,cAAO,IAAI,CAAC,SAAZ,CAAsB,IAAI,CAAC,MAA3B,CAAkC,WAAW,CAAEL,KAAK,CAACqC,IAAN,CAAWV,IAA1D,EAFJ,GADJ,cAKI,oCACI,6BADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,MAA5B,CAAmC,WAAW,CAAE3B,KAAK,CAACqC,IAAN,CAAWT,KAA3D,EAFJ,GALJ,cASI,kCACI,eAAQ,OAAO,CAAEzB,MAAjB,kBADJ,EATJ,GADJ,CAeH,CAhBD,CAmBA,OAAQF,MAAR,EACI,IAAK,KAAL,CACI,MAAOqC,CAAAA,aAAa,EAApB,CACJ,QACI,MAAOF,CAAAA,aAAa,EAApB,CAJR,CAMH,CA5FD,CA8FA,cAAerC,CAAAA,iBAAf","sourcesContent":["import React, { useState } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport axios from \"axios\"\nimport { store } from \"../../index\"\n\nconst ChangeUserOptinos = () => {\n    const state = useSelector(state => state)\n    const [change, setChange] = useState(false)\n\n    const toggle = () => {\n        setChange(prev => !prev)\n    }\n\n    const save = async (e) => {\n        e.preventDefault()\n        console.log(e.target.newName.value)\n        console.log(e.target.newEmail.value)\n\n        let cookieValueUserID = null\n\n        if (document.cookie && document.cookie.search(\"userID\") > -1) {\n            if (e.target.newName.value === \"\" && e.target.newEmail.value === \"\") {\n                window.location.reload();\n            }\n            cookieValueUserID = document.cookie\n                .split('; ')\n                .find(row => row.startsWith('userID='))\n                .split('=')[1];\n\n            await axios.post(\"/user/changeuser\", {\n                withCredentials: true,\n                name: e.target.newName.value,\n                email: e.target.newEmail.value,\n                userID: cookieValueUserID\n            }).then(response => {\n                if (response.body === \"Changes successfully changed!\") {\n                    store.dispatch({\n                        type: \"MESSAGE\",\n                        payload: response.body\n                    })\n                } else {\n                    store.dispatch({\n                        type: \"ERR_MESSAGE\",\n                        payload: response.body\n                    })\n                }\n            })\n        } else {\n            store.dispatch({\n                type: \"ERR_MESSAGE\",\n                payload: \"login first!\"\n            })\n        }\n\n    }\n\n    const defaulOptions = () => {\n        return (\n            <div className=\"userHomeSegment changeNameEmail userHomeChangeDefaults\">\n                <div>\n                    <span><p>Username: </p>{state.user.name}</span>\n                </div>\n                <div>\n                    <span><p>Email: </p>{state.user.email}</span>\n                </div>\n                <div>\n                    <button onClick={toggle}>Change</button>\n                </div>\n            </div>\n        )\n    }\n\n    const changeOptions = () => {\n        return (\n            <form onSubmit={save} className=\"userHomeSegment changeNameEmail userHomeChangeDefaults\">\n                <div>\n                    <p>Username:</p>\n                    <input name=\"newName\" type=\"text\" placeholder={state.user.name} />\n                </div>\n                <div>\n                    <p>Email:</p>\n                    <input name=\"newEmail\" type=\"text\" placeholder={state.user.email} />\n                </div>\n                <div>\n                    <button onClick={toggle}>Save</button>\n                </div>\n            </form>\n        )\n    }\n\n\n    switch (change) {\n        case true:\n            return changeOptions()\n        default:\n            return defaulOptions()\n    }\n}\n\nexport default ChangeUserOptinos"]},"metadata":{},"sourceType":"module"}