{"ast":null,"code":"import { fetchUserData, checkUserAuth, createMcConfig, serverPodsInfo, serverSVCInfo, serverInfo, getQuaryParams, getCookies, productInfo } from \"../redux/actions/index\";\nimport store from \"../store\"; // see attached link: https://stackoverflow.com/questions/50924814/node-js-wait-for-multiple-async-calls-to-finish-before-continuing-in-code for sayn execution \n\nexport default (async () => {\n  var _store$getState, _store$getState$user, _store$getState$user$;\n\n  await Promise.all([store.dispatch(checkUserAuth), store.dispatch(getQuaryParams), store.dispatch(productInfo), store.dispatch(getCookies)]);\n  if (store.getState().cookies.userID !== undefined && store.getState().cookies.userID === \"\") return; // cheking if user is logged in\n\n  await store.dispatch(fetchUserData);\n  if (((_store$getState = store.getState()) === null || _store$getState === void 0 ? void 0 : (_store$getState$user = _store$getState.user) === null || _store$getState$user === void 0 ? void 0 : (_store$getState$user$ = _store$getState$user.past_servers) === null || _store$getState$user$ === void 0 ? void 0 : _store$getState$user$.length) <= 0) return; // cheking if user have/ had a server\n\n  await Promise.all([store.dispatch(createMcConfig), store.dispatch(serverPodsInfo), store.dispatch(serverSVCInfo), store.dispatch(serverInfo)]);\n  console.log(\"data after fetch func: \", store.getState()); // check if loginReset is true, if case, resetting cookies\n\n  if (store.getState().resetLogin) {\n    const cookieKey = [\"loginAuth\", \"userID\"];\n    cookieKey.forEach(element => {\n      document.cookie = `${element}=;path=/;expires=Thu, 01 Jan 1970T00:00:00Z;`;\n    });\n    store.dispatch({\n      type: \"AUTH_SUCCESS\",\n      payload: {\n        auth: store.getState().auth,\n        resetLogin: false\n      }\n    });\n  }\n}); // export default Promise.all([\n// ]).then(async () => {\n//     console.log(\"2\")\n//     if (store.getState().cookies.userID !== undefined && store.getState().cookies.userID !== \"\") { // cheking if user is logged in\n//         await store.dispatch(fetchUserData)\n//         if (store.getState().user.past_servers.length > 0) { // cheking if user have/ had a server\n//             Promise.all([\n//             ]).then(() => {\n//             })\n//         }\n//     }\n// })","map":{"version":3,"sources":["/home/main-pc/programing/main_Project/client/src/components/loadBaseData.jsx"],"names":["fetchUserData","checkUserAuth","createMcConfig","serverPodsInfo","serverSVCInfo","serverInfo","getQuaryParams","getCookies","productInfo","store","Promise","all","dispatch","getState","cookies","userID","undefined","user","past_servers","length","console","log","resetLogin","cookieKey","forEach","element","document","cookie","type","payload","auth"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,aAAxB,EAAuCC,cAAvC,EAAuDC,cAAvD,EAAuEC,aAAvE,EAAsFC,UAAtF,EAAkGC,cAAlG,EAAkHC,UAAlH,EAA8HC,WAA9H,QAAiJ,wBAAjJ;AACA,OAAOC,KAAP,MAAkB,UAAlB,C,CAEA;;AAEA,gBAAe,YAAY;AAAA;;AACvB,QAAMC,OAAO,CAACC,GAAR,CAAY,CACdF,KAAK,CAACG,QAAN,CAAeX,aAAf,CADc,EAEdQ,KAAK,CAACG,QAAN,CAAeN,cAAf,CAFc,EAGdG,KAAK,CAACG,QAAN,CAAeJ,WAAf,CAHc,EAIdC,KAAK,CAACG,QAAN,CAAeL,UAAf,CAJc,CAAZ,CAAN;AAOA,MAAIE,KAAK,CAACI,QAAN,GAAiBC,OAAjB,CAAyBC,MAAzB,KAAoCC,SAApC,IAAiDP,KAAK,CAACI,QAAN,GAAiBC,OAAjB,CAAyBC,MAAzB,KAAoC,EAAzF,EAA6F,OARtE,CAQ8E;;AAErG,QAAMN,KAAK,CAACG,QAAN,CAAeZ,aAAf,CAAN;AAEA,MAAI,oBAAAS,KAAK,CAACI,QAAN,8FAAkBI,IAAlB,uGAAwBC,YAAxB,gFAAsCC,MAAtC,KAAgD,CAApD,EAAuD,OAZhC,CAYwC;;AAE/D,QAAMT,OAAO,CAACC,GAAR,CAAY,CACdF,KAAK,CAACG,QAAN,CAAeV,cAAf,CADc,EAEdO,KAAK,CAACG,QAAN,CAAeT,cAAf,CAFc,EAGdM,KAAK,CAACG,QAAN,CAAeR,aAAf,CAHc,EAIdK,KAAK,CAACG,QAAN,CAAeP,UAAf,CAJc,CAAZ,CAAN;AAOAe,EAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCZ,KAAK,CAACI,QAAN,EAAvC,EArBuB,CAuBvB;;AACA,MAAIJ,KAAK,CAACI,QAAN,GAAiBS,UAArB,EAAiC;AAC7B,UAAMC,SAAS,GAAG,CAAC,WAAD,EAAc,QAAd,CAAlB;AACAA,IAAAA,SAAS,CAACC,OAAV,CAAkBC,OAAO,IAAI;AACzBC,MAAAA,QAAQ,CAACC,MAAT,GAAmB,GAAEF,OAAQ,8CAA7B;AACH,KAFD;AAGAhB,IAAAA,KAAK,CAACG,QAAN,CAAe;AACXgB,MAAAA,IAAI,EAAE,cADK;AAEXC,MAAAA,OAAO,EAAE;AACLC,QAAAA,IAAI,EAAErB,KAAK,CAACI,QAAN,GAAiBiB,IADlB;AAELR,QAAAA,UAAU,EAAE;AAFP;AAFE,KAAf;AAOH;AACJ,CArCD,E,CA6CA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA","sourcesContent":["import { fetchUserData, checkUserAuth, createMcConfig, serverPodsInfo, serverSVCInfo, serverInfo, getQuaryParams, getCookies, productInfo } from \"../redux/actions/index\"\nimport store from \"../store\"\n\n// see attached link: https://stackoverflow.com/questions/50924814/node-js-wait-for-multiple-async-calls-to-finish-before-continuing-in-code for sayn execution \n\nexport default async () => {\n    await Promise.all([\n        store.dispatch(checkUserAuth),\n        store.dispatch(getQuaryParams),\n        store.dispatch(productInfo),\n        store.dispatch(getCookies)\n    ])\n\n    if (store.getState().cookies.userID !== undefined && store.getState().cookies.userID === \"\") return  // cheking if user is logged in\n\n    await store.dispatch(fetchUserData)\n\n    if (store.getState()?.user?.past_servers?.length <= 0) return  // cheking if user have/ had a server\n\n    await Promise.all([\n        store.dispatch(createMcConfig),\n        store.dispatch(serverPodsInfo),\n        store.dispatch(serverSVCInfo),\n        store.dispatch(serverInfo)\n    ])\n\n    console.log(\"data after fetch func: \", store.getState())\n\n    // check if loginReset is true, if case, resetting cookies\n    if (store.getState().resetLogin) {\n        const cookieKey = [\"loginAuth\", \"userID\"]\n        cookieKey.forEach(element => {\n            document.cookie = `${element}=;path=/;expires=Thu, 01 Jan 1970T00:00:00Z;`\n        })\n        store.dispatch({\n            type: \"AUTH_SUCCESS\",\n            payload: {\n                auth: store.getState().auth,\n                resetLogin: false\n            }\n        })\n    }\n}\n\n\n\n\n\n\n\n// export default Promise.all([\n\n// ]).then(async () => {\n//     console.log(\"2\")\n//     if (store.getState().cookies.userID !== undefined && store.getState().cookies.userID !== \"\") { // cheking if user is logged in\n//         await store.dispatch(fetchUserData)\n//         if (store.getState().user.past_servers.length > 0) { // cheking if user have/ had a server\n//             Promise.all([\n\n//             ]).then(() => {\n\n//             })\n//         }\n//     }\n// })\n\n"]},"metadata":{},"sourceType":"module"}