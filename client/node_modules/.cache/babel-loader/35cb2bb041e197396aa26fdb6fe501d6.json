{"ast":null,"code":"var _jsxFileName = \"/home/main-pc/programing/main_Project/client/src/components/userHome/server.jsx\",\n    _s = $RefreshSig$();\n\nimport ChangeServerConfig from \"./changeServerConfig\";\nimport { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactTooltip from 'react-tooltip';\nimport { store } from \"../../index\";\nimport { fetchUserData, serverPodsInfo, serverSVCInfo, mcConfGetData, serverTimeInfo } from \"../../redux/actions\";\nimport { startServer, stopServer } from \"../../redux/actions/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Server = () => {\n  _s();\n\n  const [userData, updateUserData] = useState(store.getState());\n  const [logsExpand, setLogsExpand] = useState(false); //const []\n\n  const history = useHistory();\n  const reset = false;\n  const resetTime = new Date();\n  store.subscribe(() => {\n    updateUserData(store.getState());\n  });\n  useEffect(() => {\n    const ele = document.getElementById('logsText');\n    ele.scrollTop = ele.scrollHeight; // refresh logs \n\n    if (store.getState().serverPods.status != \"server not running\") {\n      const interval = setInterval(() => {\n        store.dispatch(serverPodsInfo);\n        serverTimeInfo(store.dispatch, reset, resetTime);\n      }, 5000);\n      return () => clearInterval(interval);\n    }\n  }, [userData]);\n  useEffect(() => {\n    const ele = document.getElementById('logsText');\n    ele.style.cursor = 'grab';\n    let pos = {\n      top: 0,\n      left: 0,\n      x: 0,\n      y: 0\n    };\n\n    const mouseDownHandler = function (e) {\n      ele.style.cursor = 'grabbing';\n      ele.style.userSelect = 'none';\n      pos = {\n        left: ele.scrollLeft,\n        top: ele.scrollTop,\n        // Get the current mouse position\n        x: e.clientX,\n        y: e.clientY\n      };\n      document.addEventListener('mousemove', mouseMoveHandler);\n      document.addEventListener('mouseup', mouseUpHandler);\n    };\n\n    const mouseMoveHandler = function (e) {\n      // How far the mouse has been moved\n      const dx = e.clientX - pos.x;\n      const dy = e.clientY - pos.y; // Scroll the element\n\n      ele.scrollTop = pos.top - dy;\n      ele.scrollLeft = pos.left - dx;\n    };\n\n    const mouseUpHandler = function () {\n      ele.style.cursor = 'grab';\n      ele.style.removeProperty('user-select');\n      document.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n    }; // Attach the handler\n\n\n    ele.addEventListener('mousedown', mouseDownHandler);\n  }, []);\n\n  const startStop = e => {\n    if (e.target.className === \"innerDivStart\") {\n      console.log(\"u said start?\");\n      store.dispatch(startServer);\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Server starting up!\"\n      });\n    } else if (e.target.className === \"innerDivStop\") {\n      console.log(\"u said stop?\");\n      store.dispatch(stopServer);\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Server shutting down!\"\n      });\n    }\n  };\n\n  const serverStatus = e => {\n    switch (userData.serverPods.status) {\n      case \"True\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"runningDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"running\",\n            children: \"Running\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 16\n        }, this);\n\n      case \"False\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closingDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closing\",\n            children: \"Shutting Down\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 16\n        }, this);\n\n      case \"Pending\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closingDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closing\",\n            children: \"Starting up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 16\n        }, this);\n\n      case \"Queuing\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closingDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closing\",\n            children: \"Queuing for server\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 16\n        }, this);\n\n      case \"server not running\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closedDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closed\",\n            children: \"Not Running\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 16\n        }, this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closedDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closed\",\n            children: \"ERROR OCCURED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 16\n        }, this);\n    }\n  };\n\n  const serverIP = () => {\n    if (userData.serverPods.status !== \"server not running\") {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"mc.servers.u1.se:\", userData.serverSVC.port]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"----\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 14\n      }, this);\n    }\n  };\n\n  const refreshData = e => {\n    store.dispatch(fetchUserData);\n    store.dispatch(serverPodsInfo);\n    store.dispatch(serverSVCInfo);\n    store.dispatch(mcConfGetData);\n    console.log(e.target.className);\n    document.getElementById(e.target.id).classList.add(\"spinAnimation\");\n    setTimeout(() => {\n      document.getElementById(e.target.id).classList.remove(\"spinAnimation\");\n    }, 1000);\n    console.log(userData.serverPods.logs);\n  };\n\n  const expandLogs = () => {\n    setLogsExpand(!logsExpand);\n    console.log(\"This is the logsExpand function; \", logsExpand);\n  };\n\n  const copyText = e => {\n    navigator.clipboard.writeText(e.target.innerText);\n  };\n\n  if (document.cookie.search(\"loginAuth\") > -1) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userHomeServerName\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: userData.env[4].value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userHomeSegment userHomeStatusOfServer\",\n        children: [serverStatus(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkStatus fas fa-sync\",\n          id: \"checkStatus\",\n          onClick: refreshData,\n          \"data-tip\": true,\n          \"data-for\": \"refreshInfo\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Check Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userHomeSegment suerhomeStartStopServer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"innerDivStart\",\n          onClick: startStop,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"userHomestart\",\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"innerDivStop\",\n          onClick: startStop,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"userHomestop\",\n            children: \"Stop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"random23894723\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"userHomeLineBetweenStartStop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userHomeSegment userHomeIpAdress\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Server IP:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          \"data-tip\": true,\n          \"data-for\": \"copyServerAddress\",\n          onClick: copyText,\n          children: serverIP()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChangeServerConfig, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: logsExpand ? \"logsMainContainer logsMainContainerExpanded userHomeSegment\" : \"logsMainContainer userHomeSegment\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logsExpandArrow fas fa-expand-arrows-alt\",\n          onClick: expandLogs,\n          \"data-tip\": true,\n          \"data-for\": \"expandLogs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logsText\",\n          id: \"logsText\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [userData.serverPods.logs, /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logsTextContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Logs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: refreshData,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"checkStatus fas fa-sync\",\n              id: \"checkStatus\",\n              \"data-tip\": true,\n              \"data-for\": \"refreshInfo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"playtimeContainer userHomeSegment\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"playtimeTimeContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"playtimetimedescription\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"time remaining\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"playtimetimetime\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"playtimeContainerLine\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"playtimeBtnContainer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: \"copyServerAddress\",\n        delayShow: \"100\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click to copy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: \"refreshInfo\",\n        place: \"bottom\",\n        delayShow: \"100\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click to refresh logs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: \"expandLogs\",\n        place: \"bottom\",\n        delayShow: \"100\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click to expand/minimize logs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  } else {\n    console.log(\"User no auth\");\n    history.push(\"/\");\n    return null;\n  }\n};\n\n_s(Server, \"eEDpdeBPnBvRmPf3HfNuv2nh3i0=\", false, function () {\n  return [useHistory];\n});\n\n_c = Server;\nexport default Server;\n\nvar _c;\n\n$RefreshReg$(_c, \"Server\");","map":{"version":3,"sources":["/home/main-pc/programing/main_Project/client/src/components/userHome/server.jsx"],"names":["ChangeServerConfig","useState","useEffect","useHistory","ReactTooltip","store","fetchUserData","serverPodsInfo","serverSVCInfo","mcConfGetData","serverTimeInfo","startServer","stopServer","Server","userData","updateUserData","getState","logsExpand","setLogsExpand","history","reset","resetTime","Date","subscribe","ele","document","getElementById","scrollTop","scrollHeight","serverPods","status","interval","setInterval","dispatch","clearInterval","style","cursor","pos","top","left","x","y","mouseDownHandler","e","userSelect","scrollLeft","clientX","clientY","addEventListener","mouseMoveHandler","mouseUpHandler","dx","dy","removeProperty","removeEventListener","startStop","target","className","console","log","type","payload","serverStatus","serverIP","serverSVC","port","refreshData","id","classList","add","setTimeout","remove","logs","expandLogs","copyText","navigator","clipboard","writeText","innerText","cookie","search","env","value","push"],"mappings":"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","sourcesContent":["import ChangeServerConfig from \"./changeServerConfig\";\nimport { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactTooltip from 'react-tooltip';\n\nimport { store } from \"../../index\";\nimport { fetchUserData, serverPodsInfo, serverSVCInfo, mcConfGetData, serverTimeInfo } from \"../../redux/actions\"\nimport { startServer, stopServer } from \"../../redux/actions/index\"\n\nconst Server = () => {\n  const [userData, updateUserData] = useState(store.getState());\n  const [logsExpand, setLogsExpand] = useState(false)\n  //const []\n\n  const history = useHistory();\n\n  const reset = false\n  const resetTime = new Date()\n\n  store.subscribe(() => {\n    updateUserData(store.getState());\n  });\n\n  useEffect(() => {\n    const ele = document.getElementById('logsText');\n    ele.scrollTop = ele.scrollHeight;\n\n    // refresh logs \n\n    if (store.getState().serverPods.status != \"server not running\") {\n      const interval = setInterval(() => {\n        store.dispatch(serverPodsInfo)\n        serverTimeInfo(store.dispatch, reset, resetTime)\n      }, 5000);\n      return () => clearInterval(interval);\n    }\n  }, [userData])\n\n  useEffect(() => {\n    const ele = document.getElementById('logsText');\n    ele.style.cursor = 'grab';\n\n    let pos = { top: 0, left: 0, x: 0, y: 0 };\n\n    const mouseDownHandler = function (e) {\n      ele.style.cursor = 'grabbing';\n      ele.style.userSelect = 'none';\n\n      pos = {\n        left: ele.scrollLeft,\n        top: ele.scrollTop,\n        // Get the current mouse position\n        x: e.clientX,\n        y: e.clientY,\n      };\n\n      document.addEventListener('mousemove', mouseMoveHandler);\n      document.addEventListener('mouseup', mouseUpHandler);\n    };\n\n    const mouseMoveHandler = function (e) {\n      // How far the mouse has been moved\n      const dx = e.clientX - pos.x;\n      const dy = e.clientY - pos.y;\n\n      // Scroll the element\n      ele.scrollTop = pos.top - dy;\n      ele.scrollLeft = pos.left - dx;\n    };\n\n    const mouseUpHandler = function () {\n      ele.style.cursor = 'grab';\n      ele.style.removeProperty('user-select');\n\n      document.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n    };\n\n    // Attach the handler\n    ele.addEventListener('mousedown', mouseDownHandler);\n  }, []);\n\n  const startStop = (e) => {\n    if (e.target.className === \"innerDivStart\") {\n      console.log(\"u said start?\")\n      store.dispatch(startServer)\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Server starting up!\"\n      })\n    } else if (e.target.className === \"innerDivStop\") {\n      console.log(\"u said stop?\")\n      store.dispatch(stopServer)\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Server shutting down!\"\n      })\n    }\n  }\n\n  const serverStatus = (e) => {\n    switch (userData.serverPods.status) {\n      case \"True\":\n        return <div className=\"runningDiv defaultDiv\"><p className=\"running\">Running</p></div>\n      case \"False\":\n        return <div className=\"closingDiv defaultDiv\"><p className=\"closing\">Shutting Down</p></div>\n      case \"Pending\":\n        return <div className=\"closingDiv defaultDiv\"><p className=\"closing\">Starting up</p></div>\n      case \"Queuing\":\n        return <div className=\"closingDiv defaultDiv\"><p className=\"closing\">Queuing for server</p></div>\n      case \"server not running\":\n        return <div className=\"closedDiv defaultDiv\"><p className=\"closed\">Not Running</p></div>\n      default:\n        return <div className=\"closedDiv defaultDiv\"><p className=\"closed\">ERROR OCCURED</p></div>\n    }\n  }\n  const serverIP = () => {\n    if (userData.serverPods.status !== \"server not running\") {\n      return <span>mc.servers.u1.se:{userData.serverSVC.port}</span>\n    } else {\n      return <span>----</span>\n    }\n  }\n  const refreshData = (e) => {\n    store.dispatch(fetchUserData)\n    store.dispatch(serverPodsInfo)\n    store.dispatch(serverSVCInfo)\n    store.dispatch(mcConfGetData)\n    console.log(e.target.className)\n    document.getElementById(e.target.id).classList.add(\"spinAnimation\")\n    setTimeout(() => {\n      document.getElementById(e.target.id).classList.remove(\"spinAnimation\")\n    }, 1000)\n    console.log(userData.serverPods.logs)\n  }\n\n  const expandLogs = () => {\n    setLogsExpand(!logsExpand)\n    console.log(\"This is the logsExpand function; \", logsExpand)\n  }\n\n  const copyText = (e) => {\n    navigator.clipboard.writeText(e.target.innerText)\n  }\n\n  if (document.cookie.search(\"loginAuth\") > -1) {\n    return (\n      <>\n        <div className=\"userHomeServerName\">\n          <span>{userData.env[4].value}</span>\n        </div>\n        <div className=\"userHomeSegment userHomeStatusOfServer\">\n          {serverStatus()}\n          <div className=\"checkStatus fas fa-sync\" id=\"checkStatus\" onClick={refreshData} data-tip data-for=\"refreshInfo\">\n            <span>Check Status</span>\n          </div>\n        </div>\n        <div className=\"userHomeSegment suerhomeStartStopServer\">\n          <div className=\"innerDivStart\" onClick={startStop}>\n            <span className=\"userHomestart\">Start</span>\n          </div>\n          <div className=\"innerDivStop\" onClick={startStop}>\n            <span className=\"userHomestop\">Stop</span>\n          </div>\n          <div id=\"random23894723\">\n            <div className=\"userHomeLineBetweenStartStop\" />\n          </div>\n        </div>\n        <div className=\"userHomeSegment userHomeIpAdress\">\n          <p>Server IP:</p>\n          <span data-tip data-for=\"copyServerAddress\" onClick={copyText}>{serverIP()}</span>\n        </div>\n        <ChangeServerConfig />\n        <div className={logsExpand ? \"logsMainContainer logsMainContainerExpanded userHomeSegment\" : \"logsMainContainer userHomeSegment\"}>\n          <div className=\"logsExpandArrow fas fa-expand-arrows-alt\" onClick={expandLogs} data-tip data-for=\"expandLogs\" />\n          <div className=\"logsText\" id=\"logsText\">\n            <span>\n              {userData.serverPods.logs}\n              <p></p>\n            </span>\n          </div>\n          <div className=\"logsTextContainer\">\n            <span>Logs</span>\n            <div onClick={refreshData}>\n              <div className=\"checkStatus fas fa-sync\" id=\"checkStatus\" data-tip data-for=\"refreshInfo\" />\n            </div>\n          </div>\n        </div>\n        <div className=\"playtimeContainer userHomeSegment\">\n          <div className=\"playtimeTimeContainer\">\n            <div className=\"playtimetimedescription\">\n              <span>time remaining</span>\n            </div>\n            <div className=\"playtimetimetime\">\n\n            </div>\n          </div>\n          <div className=\"playtimeContainerLine\" />\n          <div className=\"playtimeBtnContainer\">\n\n          </div>\n        </div>\n        <ReactTooltip id=\"copyServerAddress\" delayShow=\"100\">\n          <p>Click to copy</p>\n        </ReactTooltip>\n        <ReactTooltip id=\"refreshInfo\" place=\"bottom\" delayShow=\"100\">\n          <p>Click to refresh logs</p>\n        </ReactTooltip>\n        <ReactTooltip id=\"expandLogs\" place=\"bottom\" delayShow=\"100\">\n          <p>Click to expand/minimize logs</p>\n        </ReactTooltip>\n      </>\n    );\n  } else {\n    console.log(\"User no auth\")\n    history.push(\"/\");\n    return null;\n  }\n};\n\nexport default Server;\n"]},"metadata":{},"sourceType":"module"}