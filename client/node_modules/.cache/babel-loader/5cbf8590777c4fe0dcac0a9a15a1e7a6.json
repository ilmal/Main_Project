{"ast":null,"code":"var _jsxFileName = \"/home/main-pc/programing/main_Project/client/src/components/userHome/server.jsx\",\n    _s = $RefreshSig$();\n\nimport ChangeServerConfig from \"./server/changeServerConfig\";\nimport LogsComponent from \"./server/logsComponent\";\nimport { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactTooltip from 'react-tooltip';\nimport { store } from \"../../index\";\nimport { serverPodsInfo, serverTimeInfo } from \"../../redux/actions\";\nimport { startServer, stopServer } from \"../../redux/actions/index\";\nimport refreshData from \"./server/refreshData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Server = () => {\n  _s();\n\n  const [userData, updateUserData] = useState(store.getState()); // states for the playTime\n\n  const [playtimeLeft, setPlaytimeLeft] = useState(0);\n  const [playTimeReset, setPlayTimeReset] = useState(false);\n  const history = useHistory();\n  store.subscribe(() => {\n    updateUserData(store.getState());\n  });\n  useEffect(() => {\n    // cheking if the time left function has been started, and displaying custom message (0) on no time left\n    let timeOfReset = null;\n    let timeLeft = 0;\n    let serverShutDown = false;\n\n    if (userData.serverTIME != null) {\n      timeOfReset = userData.serverTIME.timeOfReset;\n      timeLeft = userData.serverTIME.timeLeft;\n      serverShutDown = userData.serverTIME.serverShutDown;\n    } // refresh logs if status isn't \"server not running\"\n\n\n    if (store.getState().serverPods.status != \"server not running\") {\n      const interval = setInterval(() => {\n        store.dispatch(serverPodsInfo); // time req\n\n        serverTimeInfo(store.dispatch, playTimeReset, timeOfReset); // updating time and resetting the reset key\n\n        setPlaytimeLeft(timeLeft);\n\n        if (playTimeReset) {\n          setPlayTimeReset(false);\n        } // cheking if time has expired and server is running, shutting down server if case is true\n\n\n        if (serverShutDown && store.getState().serverPods.status) {\n          startStop(\"shutdown\");\n        }\n      }, 5000);\n      return () => clearInterval(interval);\n    }\n  }, [userData]);\n\n  const startStop = e => {\n    var _e$target, _e$target2;\n\n    if ((e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.className) === \"innerDivStart\") {\n      console.log(\"u said start?\");\n      store.dispatch(startServer);\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Server starting up!\"\n      });\n    } else if (e === \"shutdown\" || (e === null || e === void 0 ? void 0 : (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.className) === \"innerDivStop\") {\n      console.log(\"u said stop?\");\n      store.dispatch(stopServer);\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Server shutting down!\"\n      });\n    }\n  };\n\n  const serverStatus = e => {\n    switch (userData.serverPods.status) {\n      case \"True\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"runningDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"running\",\n            children: \"Running\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 16\n        }, this);\n\n      case \"False\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closingDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closing\",\n            children: \"Shutting Down\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 16\n        }, this);\n\n      case \"Pending\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closingDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closing\",\n            children: \"Starting up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 16\n        }, this);\n\n      case \"Queuing\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closingDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closing\",\n            children: \"Queuing for server\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 16\n        }, this);\n\n      case \"server not running\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closedDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closed\",\n            children: \"Not Running\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 16\n        }, this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"closedDiv defaultDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"closed\",\n            children: \"ERROR OCCURED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 16\n        }, this);\n    }\n  };\n\n  const serverIP = () => {\n    if (userData.serverPods.status !== \"server not running\") {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"mc.servers.u1.se:\", userData.serverSVC.port]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"----\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 14\n      }, this);\n    }\n  };\n\n  const copyText = e => {\n    navigator.clipboard.writeText(e.target.innerText);\n  };\n\n  const refreshPlayTimeFunc = () => {\n    // cheking if server is running\n    if (userData.serverPods.status === \"server not running\") {\n      store.dispatch({\n        type: \"ERR_MESSAGE\",\n        payload: \"Server is not running, start server to reset time!\"\n      });\n    } else {\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Resetting play time! (may take up to 5 sec to update)\"\n      });\n      setPlayTimeReset(true);\n    }\n  };\n\n  if (document.cookie.search(\"loginAuth\") > -1) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userHomeServerName\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: userData.env[4].value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userHomeSegment userHomeStatusOfServer\",\n        children: [serverStatus(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkStatus fas fa-sync\",\n          onClick: refreshData,\n          \"data-tip\": true,\n          \"data-for\": \"refreshInfo\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Check Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userHomeSegment suerhomeStartStopServer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"innerDivStart\",\n          onClick: startStop,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"userHomestart\",\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"innerDivStop\",\n          onClick: startStop,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"userHomestop\",\n            children: \"Stop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"random23894723\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"userHomeLineBetweenStartStop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userHomeSegment userHomeIpAdress\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Server IP:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          \"data-tip\": true,\n          \"data-for\": \"copyServerAddress\",\n          onClick: copyText,\n          children: serverIP()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChangeServerConfig, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LogsComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"playtimeContainer userHomeSegment\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"playtimeTitleContainer\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Play time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"playtimeInfoContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"playtimeTimeContainer\",\n            \"data-tip\": true,\n            \"data-for\": \"playtimeleft\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"playtimetimetime\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: playtimeLeft\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"playtimetimedescription\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"minutes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"playtimeContainerLine\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"playtimeBtnContainer\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshPlayTimeFunc,\n              children: \"Refresh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: \"copyServerAddress\",\n        delayShow: \"100\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click to copy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: \"refreshInfo\",\n        place: \"bottom\",\n        delayShow: \"100\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click to refresh logs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: \"expandLogs\",\n        place: \"bottom\",\n        delayShow: \"100\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click to expand/minimize logs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: \"playtimeleft\",\n        place: \"top\",\n        delayShow: \"20\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"play time remaining\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  } else {\n    console.log(\"User no auth\");\n    history.push(\"/\");\n    return null;\n  }\n};\n\n_s(Server, \"hNcAwz7FFtsrwQ5Tf6WsxuGSR+k=\", false, function () {\n  return [useHistory];\n});\n\n_c = Server;\nexport default Server;\n\nvar _c;\n\n$RefreshReg$(_c, \"Server\");","map":{"version":3,"sources":["/home/main-pc/programing/main_Project/client/src/components/userHome/server.jsx"],"names":["ChangeServerConfig","LogsComponent","useState","useEffect","useHistory","ReactTooltip","store","serverPodsInfo","serverTimeInfo","startServer","stopServer","refreshData","Server","userData","updateUserData","getState","playtimeLeft","setPlaytimeLeft","playTimeReset","setPlayTimeReset","history","subscribe","timeOfReset","timeLeft","serverShutDown","serverTIME","serverPods","status","interval","setInterval","dispatch","startStop","clearInterval","e","target","className","console","log","type","payload","serverStatus","serverIP","serverSVC","port","copyText","navigator","clipboard","writeText","innerText","refreshPlayTimeFunc","document","cookie","search","env","value","push"],"mappings":"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","sourcesContent":["import ChangeServerConfig from \"./server/changeServerConfig\";\nimport LogsComponent from \"./server/logsComponent\"\nimport { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactTooltip from 'react-tooltip';\n\nimport { store } from \"../../index\";\nimport { serverPodsInfo, serverTimeInfo } from \"../../redux/actions\"\nimport { startServer, stopServer } from \"../../redux/actions/index\"\n\nimport refreshData from \"./server/refreshData\";\n\n\nconst Server = () => {\n  const [userData, updateUserData] = useState(store.getState());\n  // states for the playTime\n  const [playtimeLeft, setPlaytimeLeft] = useState(0)\n  const [playTimeReset, setPlayTimeReset] = useState(false)\n\n  const history = useHistory();\n\n  store.subscribe(() => {\n    updateUserData(store.getState());\n  });\n\n  useEffect(() => {\n    // cheking if the time left function has been started, and displaying custom message (0) on no time left\n    let timeOfReset = null\n    let timeLeft = 0\n    let serverShutDown = false\n    if (userData.serverTIME != null) {\n      timeOfReset = userData.serverTIME.timeOfReset\n      timeLeft = userData.serverTIME.timeLeft\n      serverShutDown = userData.serverTIME.serverShutDown\n    }\n\n    // refresh logs if status isn't \"server not running\"\n    if (store.getState().serverPods.status != \"server not running\") {\n      const interval = setInterval(() => {\n\n        store.dispatch(serverPodsInfo)\n\n        // time req\n        serverTimeInfo(store.dispatch, playTimeReset, timeOfReset)\n\n        // updating time and resetting the reset key\n        setPlaytimeLeft(timeLeft)\n        if (playTimeReset) {\n          setPlayTimeReset(false)\n        }\n\n        // cheking if time has expired and server is running, shutting down server if case is true\n        if (serverShutDown && store.getState().serverPods.status) {\n          startStop(\"shutdown\")\n        }\n\n      }, 5000);\n      return () => clearInterval(interval);\n    }\n  }, [userData])\n\n  const startStop = (e) => {\n    if (e?.target?.className === \"innerDivStart\") {\n      console.log(\"u said start?\")\n      store.dispatch(startServer)\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Server starting up!\"\n      })\n    } else if (e === \"shutdown\" || e?.target?.className === \"innerDivStop\") {\n      console.log(\"u said stop?\")\n      store.dispatch(stopServer)\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Server shutting down!\"\n      })\n    }\n  }\n\n  const serverStatus = (e) => {\n    switch (userData.serverPods.status) {\n      case \"True\":\n        return <div className=\"runningDiv defaultDiv\"><p className=\"running\">Running</p></div>\n      case \"False\":\n        return <div className=\"closingDiv defaultDiv\"><p className=\"closing\">Shutting Down</p></div>\n      case \"Pending\":\n        return <div className=\"closingDiv defaultDiv\"><p className=\"closing\">Starting up</p></div>\n      case \"Queuing\":\n        return <div className=\"closingDiv defaultDiv\"><p className=\"closing\">Queuing for server</p></div>\n      case \"server not running\":\n        return <div className=\"closedDiv defaultDiv\"><p className=\"closed\">Not Running</p></div>\n      default:\n        return <div className=\"closedDiv defaultDiv\"><p className=\"closed\">ERROR OCCURED</p></div>\n    }\n  }\n  const serverIP = () => {\n    if (userData.serverPods.status !== \"server not running\") {\n      return <span>mc.servers.u1.se:{userData.serverSVC.port}</span>\n    } else {\n      return <span>----</span>\n    }\n  }\n\n  const copyText = (e) => {\n    navigator.clipboard.writeText(e.target.innerText)\n  }\n\n  const refreshPlayTimeFunc = () => {\n    // cheking if server is running\n    if (userData.serverPods.status === \"server not running\") {\n      store.dispatch({\n        type: \"ERR_MESSAGE\",\n        payload: \"Server is not running, start server to reset time!\"\n      })\n    } else {\n      store.dispatch({\n        type: \"MESSAGE\",\n        payload: \"Resetting play time! (may take up to 5 sec to update)\"\n      })\n      setPlayTimeReset(true)\n    }\n  }\n\n  if (document.cookie.search(\"loginAuth\") > -1) {\n    return (\n      <>\n        <div className=\"userHomeServerName\">\n          <span>{userData.env[4].value}</span>\n        </div>\n        <div className=\"userHomeSegment userHomeStatusOfServer\">\n          {serverStatus()}\n          <div className=\"checkStatus fas fa-sync\" onClick={refreshData} data-tip data-for=\"refreshInfo\">\n            <span>Check Status</span>\n          </div>\n        </div>\n        <div className=\"userHomeSegment suerhomeStartStopServer\">\n          <div className=\"innerDivStart\" onClick={startStop}>\n            <span className=\"userHomestart\">Start</span>\n          </div>\n          <div className=\"innerDivStop\" onClick={startStop}>\n            <span className=\"userHomestop\">Stop</span>\n          </div>\n          <div id=\"random23894723\">\n            <div className=\"userHomeLineBetweenStartStop\" />\n          </div>\n        </div>\n        <div className=\"userHomeSegment userHomeIpAdress\">\n          <p>Server IP:</p>\n          <span data-tip data-for=\"copyServerAddress\" onClick={copyText}>{serverIP()}</span>\n        </div>\n        <ChangeServerConfig />\n        <LogsComponent />\n        <div className=\"playtimeContainer userHomeSegment\">\n          <div className=\"playtimeTitleContainer\">\n            <span>Play time</span>\n          </div>\n          <div className=\"playtimeInfoContainer\">\n            <div className=\"playtimeTimeContainer\" data-tip data-for=\"playtimeleft\">\n              <div className=\"playtimetimetime\">\n                <span>{playtimeLeft}</span>\n              </div>\n              <div className=\"playtimetimedescription\">\n                <span>minutes</span>\n              </div>\n            </div>\n            <div className=\"playtimeContainerLine\" />\n            <div className=\"playtimeBtnContainer\">\n              <button onClick={refreshPlayTimeFunc}>Refresh</button>\n            </div>\n          </div>\n        </div>\n        <ReactTooltip id=\"copyServerAddress\" delayShow=\"100\">\n          <p>Click to copy</p>\n        </ReactTooltip>\n        <ReactTooltip id=\"refreshInfo\" place=\"bottom\" delayShow=\"100\">\n          <p>Click to refresh logs</p>\n        </ReactTooltip>\n        <ReactTooltip id=\"expandLogs\" place=\"bottom\" delayShow=\"100\">\n          <p>Click to expand/minimize logs</p>\n        </ReactTooltip>\n        <ReactTooltip id=\"playtimeleft\" place=\"top\" delayShow=\"20\">\n          <p>play time remaining</p>\n        </ReactTooltip>\n      </>\n    );\n  } else {\n    console.log(\"User no auth\")\n    history.push(\"/\");\n    return null;\n  }\n};\n\nexport default Server;\n"]},"metadata":{},"sourceType":"module"}