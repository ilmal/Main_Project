{"ast":null,"code":"import _regeneratorRuntime from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{store}from\"../../../index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangeUserPass=function ChangeUserPass(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),change=_useState2[0],setChange=_useState2[1];var toggle=function toggle(){setChange(function(prev){return!prev;});};useEffect(function(){if(change){document.getElementById(\"9dso8hybf\").className=\"userHomeSegment userHomeChangeDefaults userHomeLogoutContainerDefaults userHomeLogoutContainerMoved\";console.log(change);}else{document.getElementById(\"9dso8hybf\").className=\"userHomeSegment userHomeChangeDefaults userHomeLogoutContainerDefaults userHomeLogoutContainer\";console.log(change);}},[change]);var sendData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var cookieValue;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(\"sending data\");console.log(\"oldPass: \",e.target.oldPassword.value,\"newPass1: \",e.target.newPassword1.value,\"newPass2: \",e.target.newPassword2.value);cookieValue=document.cookie.split('; ').find(function(row){return row.startsWith('userID=');}).split('=')[1];if(!(e.target.oldPassword.value===\"\"||e.target.newPassword1.value===\"\"||e.target.newPassword2.value===\"\")){_context.next=8;break;}console.log(\"Fill in all values!\");store.dispatch({type:\"ERR_MESSAGE\",payload:\"Fill in all values!\"});return _context.abrupt(\"return\");case 8:if(!(e.target.newPassword1.value!=e.target.newPassword2.value)){_context.next=12;break;}console.log(\"new passwords doesn't match!\");store.dispatch({type:\"ERR_MESSAGE\",payload:\"The verified password must match the new password!\"});return _context.abrupt(\"return\");case 12:_context.next=14;return axios.post(\"/user/changepass\",{id:cookieValue,oldPassword:e.target.oldPassword.value,newPassword:e.target.newPassword1.value}).then(function(response){if(response.data.type===\"success\"){store.dispatch({type:\"MESSAGE\",payload:response.data.payload});setChange(function(prev){return!prev;});}else if(response.data.type===\"err\"){store.dispatch({type:\"ERR_MESSAGE\",payload:response.data.payload});}});case 14:case\"end\":return _context.stop();}}},_callee);}));return function sendData(_x){return _ref.apply(this,arguments);};}();var passDefault=function passDefault(){return/*#__PURE__*/_jsx(\"div\",{className:\"userHomeSegment changePasswordDefault userHomeChangeDefaults\",children:/*#__PURE__*/_jsx(\"button\",{onClick:toggle,children:\"Change Password\"})});};var passChange=function passChange(){return/*#__PURE__*/_jsx(\"div\",{className:\"userHomeSegment changePasswordChange userHomeChangeDefaults\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"inner\",onSubmit:sendData,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Old Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"oldPassword\",autoComplete:\"off\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"New Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"newPassword1\",autoComplete:\"off\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Verify Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"newPassword2\",autoComplete:\"off\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"save\"})]})});};switch(change){case true:return passChange();default:return passDefault();}};export default ChangeUserPass;","map":{"version":3,"sources":["/home/main-pc/programing/react/client/src/components/userHome/options/changeUserPass.jsx"],"names":["React","useState","useEffect","axios","store","ChangeUserPass","change","setChange","toggle","prev","document","getElementById","className","console","log","sendData","e","preventDefault","target","oldPassword","value","newPassword1","newPassword2","cookieValue","cookie","split","find","row","startsWith","dispatch","type","payload","post","id","newPassword","then","response","data","passDefault","passChange"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport { store } from \"../../../index\"\n\nconst ChangeUserPass = () => {\n    const [change, setChange] = useState(false)\n\n    const toggle = () => {\n        setChange(prev => !prev)\n    }\n\n    useEffect(() => {\n        if (change) {\n            document.getElementById(\"9dso8hybf\").className = \"userHomeSegment userHomeChangeDefaults userHomeLogoutContainerDefaults userHomeLogoutContainerMoved\"\n            console.log(change)\n        } else {\n            document.getElementById(\"9dso8hybf\").className = \"userHomeSegment userHomeChangeDefaults userHomeLogoutContainerDefaults userHomeLogoutContainer\"\n            console.log(change)\n        }\n    }, [change])\n\n    const sendData = async (e) => {\n        e.preventDefault()\n        console.log(\"sending data\")\n        console.log(\"oldPass: \", e.target.oldPassword.value, \"newPass1: \", e.target.newPassword1.value, \"newPass2: \", e.target.newPassword2.value)\n\n        const cookieValue = document.cookie\n            .split('; ')\n            .find(row => row.startsWith('userID='))\n            .split('=')[1];\n\n        if (e.target.oldPassword.value === \"\" || e.target.newPassword1.value === \"\" || e.target.newPassword2.value === \"\") {\n            console.log(\"Fill in all values!\")\n            store.dispatch({\n                type: \"ERR_MESSAGE\",\n                payload: \"Fill in all values!\"\n            })\n            return\n        }\n\n        if (e.target.newPassword1.value != e.target.newPassword2.value) {\n            console.log(\"new passwords doesn't match!\")\n            store.dispatch({\n                type: \"ERR_MESSAGE\",\n                payload: \"The verified password must match the new password!\"\n            })\n            return\n        }\n\n\n        await axios.post(\"/user/changepass\", {\n            id: cookieValue,\n            oldPassword: e.target.oldPassword.value,\n            newPassword: e.target.newPassword1.value\n        }).then(response => {\n\n            if (response.data.type === \"success\") {\n                store.dispatch({\n                    type: \"MESSAGE\",\n                    payload: response.data.payload\n                })\n                setChange(prev => !prev)\n            } else if (response.data.type === \"err\") {\n                store.dispatch({\n                    type: \"ERR_MESSAGE\",\n                    payload: response.data.payload\n                })\n            }\n        })\n    }\n\n    const passDefault = () => {\n        return (\n            <div className=\"userHomeSegment changePasswordDefault userHomeChangeDefaults\">\n                <button onClick={toggle}>Change Password</button>\n            </div>\n        )\n\n    }\n\n    const passChange = () => {\n        return (\n            <div className=\"userHomeSegment changePasswordChange userHomeChangeDefaults\">\n                <form className=\"inner\" onSubmit={sendData}>\n                    <div>\n                        <p>Old Password:</p>\n                        <input type=\"password\" name=\"oldPassword\" autoComplete=\"off\" required />\n                    </div>\n                    <div>\n                        <p>New Password:</p>\n                        <input type=\"password\" name=\"newPassword1\" autoComplete=\"off\" required />\n                    </div>\n                    <div>\n                        <p>Verify Password:</p>\n                        <input type=\"password\" name=\"newPassword2\" autoComplete=\"off\" required />\n                    </div>\n                    <button type=\"submit\">save</button>\n                </form>\n            </div>\n        )\n\n    }\n\n    switch (change) {\n        case true:\n            return passChange()\n        default:\n            return passDefault()\n    }\n}\n\nexport default ChangeUserPass"]},"metadata":{},"sourceType":"module"}