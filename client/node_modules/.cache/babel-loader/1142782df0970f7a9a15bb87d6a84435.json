{"ast":null,"code":"import _regeneratorRuntime from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangeUserPass=function ChangeUserPass(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),change=_useState2[0],setChange=_useState2[1];var toggle=function toggle(){setChange(function(prev){return!prev;});};var sendData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var cookieValue;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(\"sending data\");console.log(\"oldPasse: \",e.target.oldPassword.value,\"newPass: \",e.target.newPassword.value);cookieValue=document.cookie.split('; ').find(function(row){return row.startsWith('userID=');}).split('=')[1];_context.next=6;return axios.post(\"/user/changepass\",{id:cookieValue,oldPassword:e.target.oldPassword.value,newPassword:e.target.newPassword.value}).then(function(response){console.log(\"response from updateData: \",response.data.data);});case 6:window.location.reload();case 7:case\"end\":return _context.stop();}}},_callee);}));return function sendData(_x){return _ref.apply(this,arguments);};}();var passDefault=function passDefault(){return/*#__PURE__*/_jsx(\"div\",{className:\"userHomeSegment changePasswordDefault userHomeChangeDefaults\",children:/*#__PURE__*/_jsx(\"button\",{onClick:toggle,children:\"Change Password\"})});};var passChange=function passChange(){return/*#__PURE__*/_jsx(\"div\",{className:\"userHomeSegment changePasswordChange userHomeChangeDefaults\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"inner\",onSubmit:sendData,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Old Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"oldPassword\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"New Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"newPassword\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"save\"})]})});};switch(change){case true:return passChange();default:return passDefault();}};export default ChangeUserPass;","map":{"version":3,"sources":["/home/main-pc/programing/react/client/src/components/userHome/changeUserPass.jsx"],"names":["React","useState","axios","ChangeUserPass","change","setChange","toggle","prev","sendData","e","preventDefault","console","log","target","oldPassword","value","newPassword","cookieValue","document","cookie","split","find","row","startsWith","post","id","then","response","data","window","location","reload","passDefault","passChange"],"mappings":"idAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,cAA4BF,QAAQ,CAAC,KAAD,CAApC,wCAAOG,MAAP,eAAeC,SAAf,eAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjBD,SAAS,CAAC,SAAAE,IAAI,QAAI,CAACA,IAAL,EAAL,CAAT,CACH,CAFD,CAIA,GAAMC,CAAAA,QAAQ,0FAAG,iBAAOC,CAAP,kIACbA,CAAC,CAACC,cAAF,GACAC,OAAO,CAACC,GAAR,CAAY,cAAZ,EACAD,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BH,CAAC,CAACI,MAAF,CAASC,WAAT,CAAqBC,KAA/C,CAAsD,WAAtD,CAAmEN,CAAC,CAACI,MAAF,CAASG,WAAT,CAAqBD,KAAxF,EAEME,WALO,CAKOC,QAAQ,CAACC,MAAT,CACfC,KADe,CACT,IADS,EAEfC,IAFe,CAEV,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,UAAJ,CAAe,SAAf,CAAJ,EAFO,EAGfH,KAHe,CAGT,GAHS,EAGJ,CAHI,CALP,uBAUPlB,CAAAA,KAAK,CAACsB,IAAN,CAAW,kBAAX,CAA+B,CACjCC,EAAE,CAAER,WAD6B,CAEjCH,WAAW,CAAEL,CAAC,CAACI,MAAF,CAASC,WAAT,CAAqBC,KAFD,CAGjCC,WAAW,CAAEP,CAAC,CAACI,MAAF,CAASG,WAAT,CAAqBD,KAHD,CAA/B,EAIHW,IAJG,CAIE,SAAAC,QAAQ,CAAI,CAChBhB,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAA0Ce,QAAQ,CAACC,IAAT,CAAcA,IAAxD,EACH,CANK,CAVO,QAiBbC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAjBa,sDAAH,kBAARvB,CAAAA,QAAQ,4CAAd,CAoBA,GAAMwB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,mBACI,YAAK,SAAS,CAAC,8DAAf,uBACI,eAAQ,OAAO,CAAE1B,MAAjB,6BADJ,EADJ,CAMH,CAPD,CASA,GAAM2B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,mBACI,YAAK,SAAS,CAAC,6DAAf,uBACI,cAAM,SAAS,CAAC,OAAhB,CAAwB,QAAQ,CAAEzB,QAAlC,wBACI,oCACI,oCADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,aAA5B,EAFJ,GADJ,cAKI,oCACI,oCADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,aAA5B,EAFJ,GALJ,cASI,eAAQ,IAAI,CAAC,QAAb,kBATJ,GADJ,EADJ,CAgBH,CAjBD,CAmBA,OAAQJ,MAAR,EACI,IAAK,KAAL,CACI,MAAO6B,CAAAA,UAAU,EAAjB,CACJ,QACI,MAAOD,CAAAA,WAAW,EAAlB,CAJR,CAMH,CA7DD,CA+DA,cAAe7B,CAAAA,cAAf","sourcesContent":["import React, { useState } from \"react\"\nimport axios from \"axios\"\n\nconst ChangeUserPass = () => {\n    const [change, setChange] = useState(false)\n\n    const toggle = () => {\n        setChange(prev => !prev)\n    }\n\n    const sendData = async (e) => {\n        e.preventDefault()\n        console.log(\"sending data\")\n        console.log(\"oldPasse: \", e.target.oldPassword.value, \"newPass: \", e.target.newPassword.value)\n\n        const cookieValue = document.cookie\n            .split('; ')\n            .find(row => row.startsWith('userID='))\n            .split('=')[1];\n\n        await axios.post(\"/user/changepass\", {\n            id: cookieValue,\n            oldPassword: e.target.oldPassword.value,\n            newPassword: e.target.newPassword.value,\n        }).then(response => {\n            console.log(\"response from updateData: \", response.data.data)\n        })\n        window.location.reload()\n    }\n\n    const passDefault = () => {\n        return (\n            <div className=\"userHomeSegment changePasswordDefault userHomeChangeDefaults\">\n                <button onClick={toggle}>Change Password</button>\n            </div>\n        )\n\n    }\n\n    const passChange = () => {\n        return (\n            <div className=\"userHomeSegment changePasswordChange userHomeChangeDefaults\">\n                <form className=\"inner\" onSubmit={sendData}>\n                    <div>\n                        <p>Old Password:</p>\n                        <input type=\"password\" name=\"oldPassword\" />\n                    </div>\n                    <div>\n                        <p>New Password:</p>\n                        <input type=\"password\" name=\"newPassword\" />\n                    </div>\n                    <button type=\"submit\">save</button>\n                </form>\n            </div>\n        )\n\n    }\n\n    switch (change) {\n        case true:\n            return passChange()\n        default:\n            return passDefault()\n    }\n}\n\nexport default ChangeUserPass"]},"metadata":{},"sourceType":"module"}