{"ast":null,"code":"import _regeneratorRuntime from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/main-pc/programing/react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";var cookieValueUserID=null;if(document.cookie&&document.cookie.search(\"userID\")>-1){cookieValueUserID=document.cookie.split('; ').find(function(row){return row.startsWith('userID=');}).split('=')[1];}var cookieValueAuth=null;if(document.cookie&&document.cookie.search(\"loginAuth\")>-1){cookieValueAuth=document.cookie.split('; ').find(function(row){return row.startsWith('loginAuth=');}).split('=')[1];}export var fetchUserData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"/user\",{id:cookieValueUserID}).then(function(res){dispatch({type:\"FETCH_USER_SUCCESS\",payload:res.data});});case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchUserData(_x){return _ref.apply(this,arguments);};}();export var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name,pass,dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post(\"/user/login\",{withCredentials:true,name:name,password:pass}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(response.data.message===\"Success!\")){_context2.next=8;break;}_context2.next=3;return checkUserAuth(dispatch);case 3:createMcConfig(dispatch);dispatch({type:\"LOGIN\",payload:{loginAuth:response.data.loginAuth,userID:response.data.userID}});window.location.reload();_context2.next=10;break;case 8:console.log(\"response.data: \",response.data);dispatch({type:\"ERR_MESSAGE\",payload:response.data});case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x5){return _ref3.apply(this,arguments);};}());case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function login(_x2,_x3,_x4){return _ref2.apply(this,arguments);};}();export var signup=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(name,email,password,dispatch){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:axios.post(\"/user/insert\",{data:{name:name,email:email,password:password}}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(response){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(response.data===\"User created\"){login(name,password,dispatch);dispatch({type:\"MESSAGE\",payload:response.data});}else{dispatch({type:\"ERR_MESSAGE\",payload:response.data});}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x10){return _ref5.apply(this,arguments);};}());case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function signup(_x6,_x7,_x8,_x9){return _ref4.apply(this,arguments);};}();export var checkUserAuth=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return axios.get(\"/user/auth\",{withCredentials:true,headers:{'Accept':'application/json','Content-Type':'application/json',\"Authorization\":cookieValueAuth}}).then(function(response){dispatch({type:\"AUTH_SUCCESS\",payload:response.data.auth});});case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function checkUserAuth(_x11){return _ref6.apply(this,arguments);};}();export var authSucess=function authSucess(dispatch){dispatch({type:\"AUTH_SUCCESS\"});};export var createMcConfig=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return axios.post(\"/mcConf/create\",{id:cookieValueUserID}).then(function(res){dispatch({type:\"DUMP\"});});case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function createMcConfig(_x12){return _ref7.apply(this,arguments);};}();export var startServer=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return axios.post(\"/server\",{id:cookieValueUserID,action:\"start\"}).then(function(res){dispatch({type:\"DUMP\"});});case 2:case\"end\":return _context8.stop();}}},_callee8);}));return function startServer(_x13){return _ref8.apply(this,arguments);};}();export var stopServer=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return axios.post(\"/server\",{id:cookieValueUserID,action:\"stop\"}).then(function(res){dispatch({type:\"DUMP\"});});case 2:case\"end\":return _context9.stop();}}},_callee9);}));return function stopServer(_x14){return _ref9.apply(this,arguments);};}();export var serverPodsInfo=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return axios.post(\"/k8s/pods\",{id:cookieValueUserID}).then(function(res){console.log(res);dispatch({type:\"SERVER_PODS_DATA\",payload:res.data});});case 2:case\"end\":return _context10.stop();}}},_callee10);}));return function serverPodsInfo(_x15){return _ref10.apply(this,arguments);};}();export var serverSVCInfo=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(dispatch){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return axios.post(\"/k8s/svc\",{id:cookieValueUserID}).then(function(res){dispatch({type:\"SERVER_SVC_DATA\",payload:res.data});});case 2:case\"end\":return _context11.stop();}}},_callee11);}));return function serverSVCInfo(_x16){return _ref11.apply(this,arguments);};}();export var mcConfGetData=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(dispatch){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return axios.post(\"/mcConf/getData\",{id:cookieValueUserID}).then(function(res){dispatch({type:\"MC_CONF_GET_DATA\",payload:res.data});});case 2:case\"end\":return _context12.stop();}}},_callee12);}));return function mcConfGetData(_x17){return _ref12.apply(this,arguments);};}();","map":{"version":3,"sources":["/home/main-pc/programing/react/client/src/redux/actions/index.jsx"],"names":["axios","cookieValueUserID","document","cookie","search","split","find","row","startsWith","cookieValueAuth","fetchUserData","dispatch","post","id","then","res","type","payload","data","login","name","pass","withCredentials","password","response","message","checkUserAuth","createMcConfig","loginAuth","userID","window","location","reload","console","log","signup","email","get","headers","auth","authSucess","startServer","action","stopServer","serverPodsInfo","serverSVCInfo","mcConfGetData"],"mappings":"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","sourcesContent":["import axios from \"axios\"\n\nlet cookieValueUserID = null\nif (document.cookie && document.cookie.search(\"userID\") > -1) {\n    cookieValueUserID = document.cookie\n        .split('; ')\n        .find(row => row.startsWith('userID='))\n        .split('=')[1];\n}\n\nlet cookieValueAuth = null\nif (document.cookie && document.cookie.search(\"loginAuth\") > -1) {\n    cookieValueAuth = document.cookie\n        .split('; ')\n        .find(row => row.startsWith('loginAuth='))\n        .split('=')[1];\n}\n\nexport const fetchUserData = async (dispatch) => {\n    await axios.post(`/user`, {\n        id: cookieValueUserID,\n    })\n        .then(res => {\n            dispatch({\n                type: \"FETCH_USER_SUCCESS\",\n                payload: res.data\n            })\n        })\n}\n\nexport const login = async (name, pass, dispatch) => {\n    await axios.post(\"/user/login\", {\n        withCredentials: true,\n        name: name,\n        password: pass\n    }).then(async (response) => {\n        if (response.data.message === \"Success!\") {\n            await checkUserAuth(dispatch)\n            createMcConfig(dispatch)\n            dispatch({\n                type: \"LOGIN\",\n                payload: {\n                    loginAuth: response.data.loginAuth,\n                    userID: response.data.userID\n                }\n            })\n            window.location.reload();\n        } else {\n            console.log(\"response.data: \", response.data)\n            dispatch({\n                type: \"ERR_MESSAGE\",\n                payload: response.data\n            })\n        }\n    })\n}\n\nexport const signup = async (name, email, password, dispatch) => {\n    axios.post(\"/user/insert\", {\n        data: {\n            name,\n            email,\n            password\n        }\n    })\n        .then(async (response) => {\n            if (response.data === \"User created\") {\n                login(name, password, dispatch)\n                dispatch({\n                    type: \"MESSAGE\",\n                    payload: response.data\n                })\n            } else {\n                dispatch({\n                    type: \"ERR_MESSAGE\",\n                    payload: response.data\n                })\n            }\n        })\n}\n\nexport const checkUserAuth = async (dispatch) => {\n    await axios.get(`/user/auth`, {\n        withCredentials: true,\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            \"Authorization\": cookieValueAuth\n        }\n    })\n        .then(response => {\n            dispatch({\n                type: \"AUTH_SUCCESS\",\n                payload: response.data.auth\n            })\n        })\n}\n\nexport const authSucess = (dispatch) => {\n    dispatch({\n        type: \"AUTH_SUCCESS\"\n    })\n}\n\nexport const createMcConfig = async (dispatch) => {\n    await axios.post(`/mcConf/create`, {\n        id: cookieValueUserID\n    })\n        .then(res => {\n            dispatch({\n                type: \"DUMP\"\n            })\n        })\n}\n\nexport const startServer = async (dispatch) => {\n    await axios.post(`/server`, {\n        id: cookieValueUserID,\n        action: \"start\"\n    })\n        .then(res => {\n            dispatch({\n                type: \"DUMP\"\n            })\n        })\n}\n\nexport const stopServer = async (dispatch) => {\n    await axios.post(`/server`, {\n        id: cookieValueUserID,\n        action: \"stop\"\n    })\n        .then(res => {\n            dispatch({\n                type: \"DUMP\"\n            })\n        })\n}\n\nexport const serverPodsInfo = async (dispatch) => {\n    await axios.post(`/k8s/pods`, {\n        id: cookieValueUserID\n    })\n        .then(res => {\n            console.log(res)\n            dispatch({\n                type: \"SERVER_PODS_DATA\",\n                payload: res.data\n            })\n        })\n}\n\nexport const serverSVCInfo = async (dispatch) => {\n    await axios.post(`/k8s/svc`, {\n        id: cookieValueUserID\n    })\n        .then(res => {\n            dispatch({\n                type: \"SERVER_SVC_DATA\",\n                payload: res.data\n            })\n        })\n}\n\nexport const mcConfGetData = async (dispatch) => {\n    await axios.post(`/mcConf/getData`, {\n        id: cookieValueUserID\n    })\n        .then(res => {\n            dispatch({\n                type: \"MC_CONF_GET_DATA\",\n                payload: res.data\n            })\n        })\n}\n\n"]},"metadata":{},"sourceType":"module"}