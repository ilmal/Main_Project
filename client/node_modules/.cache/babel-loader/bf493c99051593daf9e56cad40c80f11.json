{"ast":null,"code":"var _jsxFileName = \"/home/main-pc/programing/main_Project/client/src/components/userHome/options/changeUserPass.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { store } from \"../../../index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChangeUserPass = () => {\n  _s();\n\n  const [change, setChange] = useState(false);\n\n  const toggle = () => {\n    setChange(prev => !prev);\n  };\n\n  useEffect(() => {\n    if (change) {\n      document.getElementById(\"9dso8hybf\").className = \"userHomeSegment userHomeChangeDefaults userHomeLogoutContainerDefaults userHomeLogoutContainerMoved\";\n      console.log(change);\n    } else {\n      document.getElementById(\"9dso8hybf\").className = \"userHomeSegment userHomeChangeDefaults userHomeLogoutContainerDefaults userHomeLogoutContainer\";\n      console.log(change);\n    }\n  }, [change]);\n\n  const sendData = async e => {\n    e.preventDefault();\n    console.log(\"sending data\");\n    console.log(\"oldPass: \", e.target.oldPassword.value, \"newPass1: \", e.target.newPassword1.value, \"newPass2: \", e.target.newPassword2.value);\n    const cookieValue = document.cookie.split('; ').find(row => row.startsWith('userID=')).split('=')[1];\n\n    if (e.target.oldPassword.value === \"\" || e.target.newPassword1.value === \"\" || e.target.newPassword2.value === \"\") {\n      console.log(\"Fill in all values!\");\n      store.dispatch({\n        type: \"ERR_MESSAGE\",\n        payload: \"Fill in all values!\"\n      });\n      return;\n    }\n\n    if (e.target.newPassword1.value != e.target.newPassword2.value) {\n      console.log(\"new passwords doesn't match!\");\n      store.dispatch({\n        type: \"ERR_MESSAGE\",\n        payload: \"The verified password must match the new password!\"\n      });\n      return;\n    }\n\n    await axios.post(`${process.env.REACT_APP_BACKENDPROXY}/user/changepass`, {\n      id: cookieValue,\n      oldPassword: e.target.oldPassword.value,\n      newPassword: e.target.newPassword1.value\n    }).then(response => {\n      if (response.data.type === \"success\") {\n        store.dispatch({\n          type: \"MESSAGE\",\n          payload: response.data.payload\n        });\n        setChange(prev => !prev);\n      } else if (response.data.type === \"err\") {\n        store.dispatch({\n          type: \"ERR_MESSAGE\",\n          payload: response.data.payload\n        });\n      }\n    });\n  };\n\n  const passDefault = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"userHomeSegment changePasswordDefault userHomeChangeDefaults\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggle,\n        children: \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this);\n  };\n\n  const passChange = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"userHomeSegment changePasswordChange userHomeChangeDefaults\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"inner\",\n        onSubmit: sendData,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Old Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"oldPassword\",\n            autoComplete: \"off\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"New Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"newPassword1\",\n            autoComplete: \"off\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Verify Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"newPassword2\",\n            autoComplete: \"off\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this);\n  };\n\n  switch (change) {\n    case true:\n      return passChange();\n\n    default:\n      return passDefault();\n  }\n};\n\n_s(ChangeUserPass, \"0Z0aDILUjA8khQWqXL0h4JamudM=\");\n\n_c = ChangeUserPass;\nexport default ChangeUserPass;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChangeUserPass\");","map":{"version":3,"sources":["/home/main-pc/programing/main_Project/client/src/components/userHome/options/changeUserPass.jsx"],"names":["React","useState","useEffect","axios","store","ChangeUserPass","change","setChange","toggle","prev","document","getElementById","className","console","log","sendData","e","preventDefault","target","oldPassword","value","newPassword1","newPassword2","cookieValue","cookie","split","find","row","startsWith","dispatch","type","payload","post","process","env","REACT_APP_BACKENDPROXY","id","newPassword","then","response","data","passDefault","passChange"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport { store } from \"../../../index\"\n\nconst ChangeUserPass = () => {\n    const [change, setChange] = useState(false)\n\n    const toggle = () => {\n        setChange(prev => !prev)\n    }\n\n    useEffect(() => {\n        if (change) {\n            document.getElementById(\"9dso8hybf\").className = \"userHomeSegment userHomeChangeDefaults userHomeLogoutContainerDefaults userHomeLogoutContainerMoved\"\n            console.log(change)\n        } else {\n            document.getElementById(\"9dso8hybf\").className = \"userHomeSegment userHomeChangeDefaults userHomeLogoutContainerDefaults userHomeLogoutContainer\"\n            console.log(change)\n        }\n    }, [change])\n\n    const sendData = async (e) => {\n        e.preventDefault()\n        console.log(\"sending data\")\n        console.log(\"oldPass: \", e.target.oldPassword.value, \"newPass1: \", e.target.newPassword1.value, \"newPass2: \", e.target.newPassword2.value)\n\n        const cookieValue = document.cookie\n            .split('; ')\n            .find(row => row.startsWith('userID='))\n            .split('=')[1];\n\n        if (e.target.oldPassword.value === \"\" || e.target.newPassword1.value === \"\" || e.target.newPassword2.value === \"\") {\n            console.log(\"Fill in all values!\")\n            store.dispatch({\n                type: \"ERR_MESSAGE\",\n                payload: \"Fill in all values!\"\n            })\n            return\n        }\n\n        if (e.target.newPassword1.value != e.target.newPassword2.value) {\n            console.log(\"new passwords doesn't match!\")\n            store.dispatch({\n                type: \"ERR_MESSAGE\",\n                payload: \"The verified password must match the new password!\"\n            })\n            return\n        }\n\n\n        await axios.post(`${process.env.REACT_APP_BACKENDPROXY}/user/changepass`, {\n            id: cookieValue,\n            oldPassword: e.target.oldPassword.value,\n            newPassword: e.target.newPassword1.value\n        }).then(response => {\n\n            if (response.data.type === \"success\") {\n                store.dispatch({\n                    type: \"MESSAGE\",\n                    payload: response.data.payload\n                })\n                setChange(prev => !prev)\n            } else if (response.data.type === \"err\") {\n                store.dispatch({\n                    type: \"ERR_MESSAGE\",\n                    payload: response.data.payload\n                })\n            }\n        })\n    }\n\n    const passDefault = () => {\n        return (\n            <div className=\"userHomeSegment changePasswordDefault userHomeChangeDefaults\">\n                <button onClick={toggle}>Change Password</button>\n            </div>\n        )\n\n    }\n\n    const passChange = () => {\n        return (\n            <div className=\"userHomeSegment changePasswordChange userHomeChangeDefaults\">\n                <form className=\"inner\" onSubmit={sendData}>\n                    <div>\n                        <p>Old Password:</p>\n                        <input type=\"password\" name=\"oldPassword\" autoComplete=\"off\" required />\n                    </div>\n                    <div>\n                        <p>New Password:</p>\n                        <input type=\"password\" name=\"newPassword1\" autoComplete=\"off\" required />\n                    </div>\n                    <div>\n                        <p>Verify Password:</p>\n                        <input type=\"password\" name=\"newPassword2\" autoComplete=\"off\" required />\n                    </div>\n                    <button type=\"submit\">save</button>\n                </form>\n            </div>\n        )\n\n    }\n\n    switch (change) {\n        case true:\n            return passChange()\n        default:\n            return passDefault()\n    }\n}\n\nexport default ChangeUserPass"]},"metadata":{},"sourceType":"module"}